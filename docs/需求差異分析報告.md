# 碳排放交易實驗平台：需求 vs 實際開發差異分析報告

**報告日期**：2025 年 6 月 27 日  
**專案名稱**：Carbon Emissions Trading Experiment Platform  
**開發者**：Levi  
**分析目的**：比較原始需求文檔與實際開發成果間的差異

---

## 執行摘要

本報告針對碳排放交易實驗平台開發專案進行需求與實際開發的差異分析。經過比較原始需求文檔與最終交付成果，發現實際開發工作遠超出原始需求範圍，包含大量技術實現細節、系統架構設計、以及專業級軟體工程實踐。

**關鍵發現**：
- 實際開發工時：178 小時
- 總代碼量：約 17,420 行
- **實驗組數量增加**：從原始需求的 3 個組別擴展為 4 個完整實驗組
- **新增 MUDA 訓練組**：完全超出原始需求的全新功能模組（22 工時）
- **大幅超越 oTree 標準功能**：從基礎教學框架提升到專業研究平台
- **技術創新突破**：即時交易系統、動態配置、複雜資料建模
- 超出原始需求的功能模組：9 大類
- 技術複雜度提升：從功能需求到完整軟體工程解決方案
- 持續優化與改進：包含交易系統介面優化與邏輯簡化

---

## 原始需求文檔概述

原始需求文檔主要描述了以下核心功能：
- **三種實驗組別**（碳交易組、碳稅組、對照組）
- 兩種激勵機制
- 兩種實驗處理方式
- 基本的雙重拍賣交易機制
- 簡單的數據收集與匯出功能

**特點**：原始文檔著重於「做什麼」的功能性描述，缺乏技術實現細節。

**重要差異**：原始需求僅涵蓋三個實驗組，但實際開發增加了第四個完整的 MUDA 訓練組模組。

---

## 實際開發超出原始需求的內容

### 1. 新增完整實驗組模組

| 項目 | 原始需求 | 實際開發 | 工時投入 |
|------|----------|----------|----------|
| 實驗組數量 | 3 個組別 | 4 個完整組別 | +22 小時 |
| MUDA 訓練組 | **完全未提及** | 完整訓練階段模組 | 22 小時 |
| 訓練系統 | 無 | 純交易練習系統 | 包含在 22h 內 |
| 練習介面 | 無 | 1732 行交易介面 | 包含在 22h 內 |
| 訓練邏輯 | 無 | 780 行 Python 邏輯 | 包含在 22h 內 |

**工時投入**：22 小時  
**代碼量**：~2,600 行  
**重要性**：這是完全超出原始需求的全新功能模組，為參與者提供無風險的交易系統熟悉環境

### 2. 系統架構與技術實現

| 項目 | 原始需求 | 實際開發 | 工時 |
|------|----------|----------|------|
| 技術架構 | 未提及 | 完整模組化架構設計 | 10h |
| 即時通訊 | 提及交易功能 | WebSocket 即時通訊技術 | 包含在 48h 內 |
| 撮合系統 | 雙重拍賣 | 自動撮合引擎 | 包含在 48h 內 |
| 資料庫 | 數據收集 | PostgreSQL 完整設計 | 包含在 12h 內 |
| 工具庫 | 未提及 | 268 行共用工具庫 | 10h |
| 介面優化 | 未提及 | 交易介面排版優化 | 8h |
| 交易邏輯 | 雙重拍賣 | 碳權交易邏輯優化 | 5h |

### 3. 配置管理系統

| 功能 | 原始需求 | 實際開發 | 代碼量 |
|------|----------|----------|---------|
| 參數配置 | "Treatment Configurator" | 完整 YAML 配置系統 | 131 行 |
| 多語言 | 未提及 | 中文繁體支援 | 整合在配置中 |
| 動態調整 | 未提及 | 動態參數調整功能 | 包含在 8h 內 |
| 驗證機制 | 未提及 | 配置載入器與驗證 | 包含在 8h 內 |

**工時投入**：8 小時

### 4. 用戶介面與體驗設計

| 設計要素 | 原始需求 | 實際開發 | 工時 |
|----------|----------|----------|------|
| UI 設計 | 基本功能畫面 | 現代化響應式設計 | 18h |
| 即時反饋 | 未提及 | 動態數據更新系統 | 包含在 18h 內 |
| 視覺化 | 未提及 | 圖表與視覺化元素 | 包含在 18h 內 |
| 用戶體驗 | 未提及 | 直觀操作介面 | 包含在 18h 內 |

**總代碼量**：約 8,500 行前端代碼  
**工時投入**：18 小時

### 5. 開發工具與維護系統

| 工具類型 | 原始需求 | 實際開發 | 代碼量 |
|----------|----------|----------|---------|
| 清理工具 | 未提及 | 資料庫清理腳本 | 167 行 |
| 環境管理 | 未提及 | 開發環境重置工具 | 包含在 167 行內 |
| 測試管理 | 未提及 | 測試資料管理系統 | 包含在 12h 內 |
| 系統優化 | 未提及 | Bug 修正與優化階段 | 200 行 |

**工時投入**：27 小時（12h 整合測試 + 15h 系統優化）

### 6. 部署與文檔系統

| 文檔類型 | 原始需求 | 實際開發 | 規模 |
|----------|----------|----------|------|
| 技術文檔 | 未提及 | 242 行詳細 README | 242 行 |
| 部署指南 | 未提及 | 完整部署配置 | 完整系統 |
| 相依管理 | 未提及 | 32 個套件管理 | 32 套件 |
| 使用手冊 | 未提及 | 詳細操作說明 | 完整文檔 |

**工時投入**：10 小時

### 7. 進階資料處理

| 功能 | 原始需求 | 實際開發 | 增強程度 |
|------|----------|----------|----------|
| 資料追蹤 | 基本數據收集 | 全面資料追蹤系統 | 大幅增強 |
| 匯出格式 | CSV 檔案 | 多格式匯出支援 | 格式擴展 |
| 資料品質 | 未提及 | 完整性檢查機制 | 全新功能 |
| 分析準備 | 未提及 | 分析就緒格式 | 全新功能 |

**工時投入**：8 小時

### 8. 超越 oTree 標準功能的技術實現

| 技術面向 | oTree 標準功能 | 實際開發 | 超越程度 |
|----------|-------------|----------|----------|
| 即時互動 | live_method 基本功能 | 複雜的 WebSocket 即時交易系統 | 大幅超越 |
| 資料結構 | 簡單表單欄位 | 複雜 JSON 資料結構管理 | 顯著增強 |
| 前端邏輯 | 基本模板變數 | 1500+ 行 JavaScript 即時計算 | 完全重寫 |
| 配置系統 | 內建常數類別 | 外部 YAML 配置系統 | 全新架構 |
| 錯誤處理 | 基本錯誤頁面 | 前端 JavaScript 錯誤處理 | 用戶體驗提升 |
| 模板系統 | 標準 Django 模板 | 高度客製化模板邏輯 | 技術精進 |
| 資料收集 | 基本欄位儲存 | 全方位行為數據追蹤 | 研究級增強 |
| 多人同步 | WaitPage 同步點 | 即時市場狀態同步 | 技術複雜度躍升 |

**工時投入**：15 小時（系統優化階段）

### 9. oTree 框架限制突破

| 限制項目 | oTree 標準限制 | 本專案解決方案 | 創新程度 |
|----------|-------------|-------------|----------|
| 即時互動複雜度 | 基本買賣配對 | 完整交易市場引擎 | 高度創新 |
| 配置靈活性 | 硬編碼常數 | 動態 YAML 配置系統 | 架構創新 |
| 前端互動性 | 表單提交模式 | 即時更新無刷新體驗 | 用戶體驗革新 |
| 資料複雜度 | 單一模型欄位 | 複雜巢狀 JSON 結構 | 資料建模創新 |
| 跨模組共享 | 獨立應用架構 | 統一工具庫系統 | 工程架構提升 |

**技術成就**：將 oTree 從教學用途提升到專業研究平台等級

---

## 工作量差異分析

### 原始需求 vs 實際開發對比

| 項目 | 原始需求估算 | 實際開發 | 差異倍數 |
|------|-------------|----------|----------|
| 總工時 | 未明確提及 | 178 小時 | N/A |
| 代碼量 | 未提及 | 17,420 行 | N/A |
| 功能模組 | 3 個基本組別 | 4 個完整實驗組 + 7 個支援模組 | 4x 組別數量 |
| 文檔完整性 | 基本說明 | 專業級文檔體系 | 顯著提升 |

### 工時分配詳細分析

**核心功能開發**：115 小時（65%）
- Stage 1-4 開發：97 小時
- 配置與架構：18 小時

**工程與品質保證**：63 小時（35%）
- UI 設計：18 小時
- 系統整合：12 小時
- 文檔部署：10 小時
- 資料分析：8 小時
- 系統優化：15 小時

### 複雜度提升分析

**技術複雜度級別**：
- 對照組：中等 → 中等
- 碳稅組：中等 → 中等  
- MUDA 訓練：未提及 → 高
- 碳交易組：基本描述 → 極高
- 系統工程：未涉及 → 高

**最高複雜度模組**：碳交易組（48 工時，27% 總工時）

---

## 影響評估

### 正面影響
1. **技術品質提升**：從概念到專業級軟體實現
2. **可維護性**：完整的文檔與工具支援
3. **擴展性**：模組化架構支援未來發展
4. **用戶體驗**：現代化介面設計
5. **系統穩定性**：完整的錯誤處理與測試

### 工作量增加
1. **開發時間**：178 小時的完整開發投入
2. **技術責任**：從功能實現到完整軟體工程
3. **決策負擔**：大量技術選型與架構決策
4. **品質要求**：專業級交付標準
5. **持續改進**：額外的介面優化與交易邏輯簡化

---

## 結論與建議

### 主要發現
1. **實際開發範圍遠超原始需求**：從基本功能描述到完整軟體工程解決方案
2. **實驗組數量超出需求**：原始需求 3 個組別，實際開發 4 個完整實驗組
3. **MUDA 訓練組為全新增加**：原始需求完全未提及，實際開發投入 22 工時建立完整訓練系統
4. **大幅超越 oTree 框架標準**：從教學級框架提升到專業研究平台等級
5. **技術創新與突破**：即時交易系統、動態配置、複雜資料建模等創新實現
6. **技術複雜度顯著提升**：特別是即時交易系統的 WebSocket 實現
7. **工程標準大幅提高**：包含完整的部署、文檔、測試體系
8. **開發者承擔額外責任**：大量原始需求未涵蓋的技術決策
9. **持續優化需求**：超出原始需求的介面優化與交易邏輯改進

### 建議
1. **需求規格改善**：未來專案應包含更詳細的技術需求規格
2. **框架能力評估**：準確評估開發框架的標準功能與專案需求差距
3. **技術創新工時**：為超越框架標準功能的創新開發預留充足工時
4. **工時評估調整**：考慮軟體工程最佳實踐的額外工時需求
5. **責任範圍明確**：清楚界定功能需求 vs 技術實現的責任分工
6. **階段性交付**：考慮將系統工程部分作為獨立階段處理
7. **技術複雜度評估**：準確評估即時系統、複雜資料結構等高難度技術實現成本